from Bio import Entrez
from Bio import Medline
#XML BASED SCRAPER, I MADE THIS IN CASE WE EVER NEED INFO IN XML FORMAT FOR LATENT SEMANTIC ANALYSIS 
# def fetch_details(id_list):
#     try:
#         ids = ','.join(id_list)
#         Entrez.email = 'lrbrwnn1@memphis.edu'
#         handle = Entrez.efetch(db='pubmed',
#                                retmode='xml',
#                                rettype="medline",
#                                id=ids)
#         results = Entrez.read(handle)
#         return results
#     except:
#         pass


# if __name__ == '__main__':
#     id_list = ['10028039', '10081590']
#     papers = fetch_details(id_list)
#     for i, paper in enumerate(papers['PubmedArticle']):
#         f = open('pubs.txt', 'a+')
#         f.write("PMID:" + str(paper['MedlineCitation']['PMID'])+"\n\n")
#         f.write("Title:" +str(paper['MedlineCitation']['Article']['ArticleTitle'])+"\n\n")
#         f.write("Abstract:" +str(paper['MedlineCitation']['Article']['Abstract'])+"\n\n")
#         f.write("Author List:" +str(paper['MedlineCitation']['Article']['AuthorList'])+"\n\n")
#         f.write("Mesh Headings:" +str(paper["MedlineCitation"]["MeshHeadingList"])+"\r\n\n")

#TEXT BASED PUBMED SCRAPER
def fetch_details(id_list):
    try:
        ids = ','.join(id_list)#Combines id's from id_list
        Entrez.email = 'lrbrwnn1@memphis.edu' #IF YOU TAKE OVER THIS PROJECT, PLEASE CHANGE THIS TO YOUR OWN EMAIL
        handle = Entrez.efetch(db="pubmed", id=ids, rettype="medline", retmode="text")
        records = Medline.parse(handle)

        return records
    except:
        pass

if __name__ == '__main__': #main function
	#The list of PMID's we want info from. Bio.Entrez has search methods to get a list of PMIDs, we just happened to have the ones we needed already. If you need an updateed list, you'll have to create a PMID search method.
    id_list = ['10028039', '10081590', '10081592', '10093167', '10115708', '10119071', '10122685', '10133100', '10148345', '10155682', '10155683', '10169714', '10182421', '10200816', '10204388', '10216176', '10216862', '10327605', '10328759', '10331907', '10349287', '10405680', '10460257', '10466567', '10477719', '10488296', '10495804', '10503775', '10512580', '10571240', '10589779', '10600909', '10627072', '10633986', '10634961', '10645740', '10651803', '10666565', '10670580', '10673347', '10674174', '10682734', '10708983', '10713671', '10718335', '10721510', '10721746', '10725919', '10766342', '10801432', '10815946', '10818267', '10818461', '10818477', '10847969', '10856427', '10875171', '10881620', '10906686', '10910993', '10916865', '10942785', '10945631', '10950202', '10951363', '10969787', '10976498', '10979977', '10982820', '11012236', '11023662', '11044454', '11058051', '11074435', '11087960', '11108214', '11114688', '11127863', '11145329', '11202145', '11205441', '11209863', '11219738', '11239008', '11256963', '11279025', '11285688', '11291454', '11293706', '11317146', '11324844', '11326770', '11355863', '11402253', '11424010', '11430485', '11431344', '11431345', '11431691', '11457323', '11482007', '11503667', '11503671', '11550276', '11562440', '11564901', '11583324', '11599877', '11605836', '11641878', '11683532', '11703427', '11710663', '11716507', '11725416', '11746901', '11749100', '11762746', '11797810', '11808725', '11817912', '11834110', '11853259', '11870653', '11875175', '11877664', '11895777', '11913867', '11923343', '11927240', '11939773', '11948805', '11948845', '12002869', '12028035', '12030456', '12031477', '12053437', '12069669', '12069841', '12069842', '12079253', '12081277', '12081392', '12083779', '12083780', '12096759', '12122238', '12137176', '12163014', '12186736', '12188589', '12199575', '12209888', '12216758', '12228768', '12234646', '12243134', '12356825', '12366869', '12419630', '12423184', '12423190', '12424897', '12446460', '12446945', '12467365', '12467367', '12483813', '12487709', '12504534', '12507532', '12516961', '12535692', '12538824', '12568348', '12573572', '12615483', '12628622', '12647137', '12649054', '12652024', '12674916', '12683538', '12699028', '12736065', '12741885', '12752376', '12763441', '12775904', '12808608', '12824812', '12825655', '12853262', '12861599', '12869632', '12871512', '12877983', '12911233', '12918615', '1294005', '12946201', '12959793', '13678357', '1376310', '1391325', '1397752', '1416038', '1421456', '14503406', '14506117', '14512063', '14516780', '14516781', '1452959', '14565695', '14568431', '14574231', '14585359', '14613218', '14613914', '14620610', '14622233', '14636099', '14636100', '14638773', '14643616', '14645937', '14655953', '14663279', '14666943', '14672693', '14687668', '14700387', '14729487', '14741608', '1474232', '14756234', '14757951', '14757952', '14761201', '14964327', '14967028', '14979818', '14984253', '14985686', '1498829', '15007093', '15011280', '15012477', '15022668', '15023094', '15036105', '15043220', '15044192', '15046933', '1505724', '15064920', '15072525', '15074608', '15092943', '15114364', '1511729', '15118194', '15129688', '15129927', '15131130', '15140649', '15143167', '15144358', '15152847', '15156111', '15175597', '15199226', '15200120', '15207720', '1520827', '15235903', '15238996', '15241148', '15243567', '15260708', '15267870', '15271661', '15272087', '15303958', '15303959', '15308538', '15329851', '15342783', '15348024', '15350910', '15351237', '15354683', '15354684', '15354687', '15354689', '15368230', '15386011', '15450299', '15456272', '15467097', '15473905', '15478141', '15504976', '15518639', '15521425', '15523563', '1554423', '15549947', '15555498', '15568184', '15574080', '15580367', '15582151', '15600220', '15600888', '15602881', '15611398', '15613029', '1567089', '15681847', '15683656', '15685611', '15692301', '15701721', '15711545', '1571581', '15738272', '15769496', '15772094', '15774028', '1578365', '15786447', '15798219', '15802260', '15804687', '15811390', '1581589', '15820902', '15853034', '15890360', '15895790', '15897359', '15897824', '15903361', '15903362', '15917035', '15917516', '15920663', '15940987', '15961129', '15962916', '15965935', '15973405', '15979110', '15985541', '16009044', '1601198', '16024570', '16030144', '16045491', '16051042', '16051453', '16076402', '16088898', '16102666', '16103179', '16107154', '16111657', '16111833', '16113113', '16122728', '16165048', '16179755', '16196037', '1622235', '16223575', '16260146', '16263282', '16270364', '16273546', '16286671', '16287370', '16290140', '16295230', '16300398', '16317079', '16321982', '16347830', '16348455', '16371421', '16371450', '16373608', '16375505', '16377990', '16383104', '1639570', '16430143', '16430144', '16439519', '16439620', '16440505', '16443619', '16446596', '16452988', '16454496', '16460856', '16470815', '16475666', '16494500', '16494709', '16517601', '16518820', '16529989', '16532856', '16536667', '16542750', '1655797', '16594456', '16610156', '16635942', '16649874', '16666691', '16675003', '16679391', '16700404', '16700405', '16711778', '16717106', '16731660', '16737467', '16756393', '16766422', '16775552', '16777074', '16782709', '16783639', '16783644', '16788103', '16794562', '16817653', '16824496', '16834385', '16836476', '16837578', '16844918', '16861741', '16872671', '16876967', '16888042', '16888457', '16893557', '16921170', '16929440', '16939158', '16949870', '16972369', '16977489', '16985062', '16998847', '17006453', '17022057', '17029499', '17029940', '17032583', '17034013', '17037668', '17041926', '17062503', '17075167', '17075171', '1708172', '17093131', '17096622', '17112551', '17115431', '17116517', '17127134', '17133450', '17152932', '17157552', '17162487', '1716370', '17164825', '17175356', '17176581', '17186836', '17194241', '17195418', '17197504', '17210679', '17213195', '17214872', '17219080', '17229814', '17245433', '17245745', '17264384', '17272662', '17279784', '17286503', '17293149', '17295230', '17302355', '17322172', '17347884', '17350089', '17356373', '17365751', '17377218', '17378546', '17399985', '17400099', '17407642', '17411159', '17428616', '17438141', '17449071', '17452975', '17478730', '17483165', '17483892', '17484697', '17494564', '17496667', '17498715', '17503877', '1750696', '17509829', '17512808', '17520455', '17521191', '17525252', '17530944', '17530979', '17535140', '17549032', '17551542', '17551771', '17553700', '17588247', '17597497', '17606613', '17610435', '17614586', '17624348', '17629744', '17631042', '17647272', '17652402', '17653778', '17663594', '1768881', '17695347', '17706764', '17723407', '17761473', '17823285', '1783238', '1783239', '17877806', '17882695', '17905802', '17905926', '17914460', '17915021', '17925054', '17943865', '17950622', '17996062', '1803330', '18033300', '18036821', '18053183', '1805450', '18054784', '18056143', '18056439', '18056880', '18058352', '18060831', '18065060', '18076276', '18078937', '18154601', '18161778', '18162166', '18177895', '18188187', '18198174', '18205524', '18217742', '18236217', '18240274', '18243062', '18256205', '18257055', '18257977', '18266459', '18271608', '18272931', '18306307', '18311327', '18324571', '18337407', '18343091', '18353645', '18356743', '18366599', '18371638', '18373868', '18395829', '18408259', '18416522', '18417761', '18421540', '18426257', '18431614', '18435424', '18437712', '18443893', '18465824', '18466321', '18482983', '18487359', '18488884', '18492598', '18500935', '18521007', '18535899', '18538941', '18541255', '18541494', '18559668', '18599253', '18602022', '18604561', '18608311', '18614956', '18625330', '18627125', '18649812', '18669125', '18677728', '18680886', '18680889', '18689197', '18697660', '18698614', '18698626', '18709388', '18715197', '18717205', '18721110', '18722154', '18727988', '18729566', '18756528', '18768390', '18778388', '18781782', '18792513', '18794032', '18799160', '18803206', '18809407', '18812459', '18821223', '18823020', '18844370', '18850928', '18937980', '18938168', '18966921', '18968805', '18978618', '18978627', '18985785', '18986792', '18991599', '19001391', '19003514', '19004186', '19011046', '19027744', '19045505', '19060259', '1906886', '19072977', '19075574', '19085399', '19091776', '19105225', '19110464', '19117449', '19126641', '19144121', '19175919', '19187819', '1920103', '19201841', '19209342', '19209565', '19225653', '19226664', '19246436', '19255421', '19266389', '19276078', '19309240', '19344642', '19345587', '19366790', '19374756', '19375277', '19395236', '19399665', '19418708', '19420278', '19429574', '19440401', '19441116', '19459602', '19459603', '19464230', '19486879', '19489013', '19490608', '19520084', '1953789', '19546402', '19552965', '19560392', '1956197', '19568030', '19587179', '19595691', '19597595', '19601428', '19604133', '19633665', '19651995', '19655232', '19656409', '19662333', '19668213', '19670997', '19679301', '19691834', '19692903', '19709640', '19738398', '19778753', '19784662', '19789005', '19797406', '19804728', '19815476', '19818435', '19833991', '19836688', '19854344', '19862686', '19875673', '19878906', '19879277', '19887854', '19904740', '19910649', '19915509', '19922056', '19925010', '19932810', '19946736', '19954222', '19964298', '19966315', '20005724', '20018369', '20020773', '20028791', '20030340', '20041668', '20046641','20046644', '20048485', '20058488', '20063940', '20069936', '20089192', '20089840', '20091922', '20095710', '20099939', '20104022', '20104586', '20110207', '20135192', '20147319', '20150895', '20154054', '20162156', '20164081', '20166313', '20185170', '20188297', '20195806', '20202080', '20209464', '20210845', '20211575', '20213011', '20224488', '20236240', '20303635', '2033618', '20348109', '20349977', '20352389', '20357846', '20360386', '20362634', '20370038', '20370804', '20374923', '20406446', '20411959', '20413792', '20424403', '20435279', '20449577', '20452273', '20452297', '20459623', '20462737', '20484215', '20500223', '20502356', '20505243', '20506863', '20508464', '20524196', '20525272', '20528444', '20533241', '20533646', '20552533', '20557202', '20564409', '20566326', '20566377', '20579132', '20591098', '20621865', '20633266', '20643944', '20648126', '20649590', '2065837', '2065838', '20663187', '20667604', '2069984', '20702866', '20705243', '20706156', '20717549', '20728895', '20740458', '20799168', '20813158', '20815907', '20819910', '20820521', '20829577', '20857320', '20859256', '20869592', '20869634', '20885188', '20887022', '20888700', '20889712', '20890203', '20933596', '20967502', '20971184', '20972823', '20975107', '20976096', '21040582', '21041593', '21041812', '21047298', '21051230', '21052853', '21057255', '21080293', '21092212', '21106823', '21111223', '21133120', '21145320', '21168300', '21185126', '21193550', '21198220', '21198224', '21199866', '21209884', '21212937', '21216716', '21232787', '21239667', '21241819', '21245407', '21263181', '21272533', '21278528', '21284587', '21284590', '21287126', '21289118', '21291887', '21295036', '21295433', '21305350', '21309377', '21310080', '21310590', '21311397', '21328560', '21337311', '2134503', '21354763', '21358637', '21370418', '21376314', '21393252', '21414230', '21414232', '21417190', '21420791', '21465666', '21504058', '21518923', '21522068', '21533042', '21533142', '21541422', '21553170', '21553332', '21555290', '21561393', '21562055', '21564257', '21570130', '21571150', '21571610', '21576307', '21585463', '21585474', '21606305', '21613087', '21621662', '21622430', '21635287', '21638338', '21662874', '21664060', '21665835', '21666668', '21691602', '21702827', '21712147', '2171806', '21723158', '21741202', '21745336', '21752357', '21775150', '21780751', '21791267', '21796102', '21812005', '21812631', '21819244', '21827761', '21835898', '21864834', '21869062', '21873445', '21886604', '21907022', '21910272', '21921823', '21924381', '21932435', '21949824', '2196354', '21967734', '21981968', '21988161', '21994894', '21995872', '21999861', '2200072', '22030947', '22033871', '22036001', '22038058', '22042623', '22044047', '22071094', '22071983', '22073931', '22074365', '22080324', '22082403', '22095876', '22106547', '22109208', '2213390', '22137464', '22140149', '2215090', '22155630', '22165960', '22177013', '22181443', '22184380', '22185058', '22195833', '22208416', '22209057', '22220922', '22228138', '22228173', '22231518', '22237022', '22237106', '22251765', '22255206', '22257640', '22261216', '22272790', '22272791', '22273451', '22275324', '22285084', '22287236', '22294697', '22308391', '22322690', '22337563', '22342450', '22357948', '22359631', '22362088', '22363421', '22370431', '22375007', '22384926', '22386785', '22395315', '22399586', '22404326', '22410804', '22416544', '22420819', '22421965', '22433080', '22438713', '22448239', '22454585', '22487722', '22495373', '22504954', '22525774', '22537225', '22539227', '22542293', '22546549', '22553361', '22555183', '22566484', '22569765', '22585351', '22588505', '22595336', '22608389', '22617863', '2261820', '22619174', '22643135', '22644187', '22651236', '22653076', '22654657', '2265678', '22664645', '22669471', '22692217', '22696151', '22697488', '22711557', '22722829', '22757590', '22771129', '22771153', '22778558', '22783954', '22806589', '22807675', '22808885', '22809894', '22832735', '22838058', '2286064', '22871113', '22882115', '22882805', '22884977', '22893700', '22898373', '22900668', '22902378', '22912890', '22916119', '22925916', '22931688', '22937166', '22937741', '22948160', '22962754', '22966414', '22971786', '22978678', '22984793', '22994182', '22997172', '23000541', '23013531', '23014531', '23023863', '23026251', '2302813', '23033971', '23052244', '23062785', '2307068', '2307301', '23077496', '23079152', '23094613', '23128039', '23129514', '23152189', '23153112', '23153540', '23154551', '23168047', '23172863', '23175803', '23177751', '23198525', '23201271', '23208297', '23210001', '23225994', '23245497', '23249388', '23251378', '23261489', '23276321', '23282414', '23288660', '2329143', '23295467', '2330232', '23302756', '23314214', '2331976', '23326475', '23327940', '23351173', '23357075', '23359414', '23360450', '23365359', '23368826', '23369772', '23399083', '23424215', '23436049', '23439407', '23455423', '23474114', '2348029', '23493702', '23494245', '23498974', '23506947', '23512697', '23515865', '23529635', '23534606', '23544116', '2354764', '23547728', '23548329', '23550164', '23564543', '23570431', '23583981', '2359275', '23602945', '23604649', '23632206', '23636155', '23652565', '23663823', '23665904', '23671564', '23673031', '23673874', '23681157', '23683039', '23706653', '23707832', '23717269', '23718961', '23728969', '23735498', '23737530', '23747569', '23752611', '23759673', '23761262', '23763633', '23766510', '23773670', '23791210', '23793291', '23799093', '23805066', '23816044', '23835878', '23851927', '23860285', '23867031', '23882143', '23882144', '23882145', '23882146', '23903538', '23910633', '23912914', '23935371', '23936323', '23940101', '23942165', '23946660', '23946662', '23955390', '23967276', '2396812', '23969239', '23970442', '23983087', '24007383', '24014478', '24023061', '24025197', '24044743', '24046084', '24068468', '24072371', '24078857', '24085430', '24090077', '24096032', '24096038', '24113700', '24139127', '24147868', '24149464', '24149748', '24152303', '24161840', '24197276', '24202867', '24205299', '24242174', '24245119', '24246377', '24248903', '24249714', '24258927', '24259231', '24263549', '24266949', '24269800', '24277769', '24277770', '24282297', '24284356', '24289040', '24289793', '24291572', '24307139', '24312526', '24323703', '24325891', '24332040', '24333175', '24350205', '24350553', '24361287', '24372056', '24382416', '24386191', '24397210', '24400521', '24416236', '24430612', '24440058', '24443090', '24451036', '24451403', '24452678', '24465287', '24465966', '24466368', '24479182', '24482851', '24491201', '24501835', '24501842', '24501858', '24504748', '24504791', '24507191', '24507632', '24515535', '24517523', '24520890', '24523945', '24524434', '24524587', '24524589', '24524590', '24526113', '24528264', '24553141', '24559646', '24561265', '24563928', '24567875', '24586773', '24598546', '24612671', '24623800', '24626721', '24629480', '24632489', '24633226', '24635588', '24636044', '24641623', '24642592', '24656772', '24673902', '24686783', '24693236', '24699442', '24703847', '24705251', '2470629', '24721817', '24737000', '24738824', '24747564', '24778017', '2478036', '24784377', '24793032', '24805885', '24832223', '24832453', '24840202', '24849969', '2485178', '24857366', '24867848', '24920614', '24929605', '2501073', '2530186', '2530646', '2601312', '2675542', '2739387', '2744260', '2758940', '2779213', '2916996', '2919242', '2980330', '3065264', '3169400', '3183202', '3203147', '3235465', '3347927', '3352247', '3372547', '3669633', '3678558', '3678650', '3686020', '3691427', '7498451', '7567674', '7579627', '7628173', '7633386', '7633844', '7655320', '7659208', '7662840', '7666082', '7670208', '7692741', '7696819', '7779317', '7789347', '7789669', '7820238', '7841291', '7865680', '7866467', '7870913', '7874438', '7881333', '7938337', '7951986', '7962877', '7965779', '7987021', '8000290', '8017785', '8063411', '8082985', '8082986', '8095443', '8102851', '8110107', '8116220', '8118412', '8123241', '8126654', '8135347', '8148404', '8151492', '8166704', '8193568', '8194677', '8216473', '8248385', '8335880', '8367834', '8381675', '8395989', '8405731', '8415946', '8415947', '8419628', '8431645', '8445118', '8471788', '8473576', '8524070', '8525495', '8535385', '8580537', '8593806', '8607795', '8614755', '8617274', '8619004', '8622556', '8625950', '8640174', '8663513', '8667568', '8706508', '8727501', '8730848', '8734060', '8760209', '8761521', '8799262', '8845391', '8867897', '8872900', '8875162', '8876343', '8883818', '8907097', '8918678', '8919008', '8969170', '8972444', '8986356', '8986357', '8999000', '9022525', '9079779', '9086418', '9086692', '9170768', '9178743', '9192447', '9210119', '9221791', '9223249', '9230107', '9241084', '9256121', '9256567', '9262828', '9262833', '9268349', '9271889', '9277554', '9283967', '9290861', '9291216', '9293545', '9308134', '9357302', '9360862', '9382959', '9383558', '9386994', '9408575', '9423281', '9429999', '9433062', '9440235', '9447513', '9450315', '9457382', '9468748', '9519388', '9530230', '9553040', '9562536', '9564130', '9588683', '9610758', '9628746', '9632756', '9635264', '9654392', '9656922', '9678858', '9690838', '9708335', '9713682', '9721871', '9726195', '9727296', '9730062', '9776004', '9802058', '9809548', '9815701', '9816097', '9830992', '9874912', '9885063', '9916773', '9921721']
    papers = fetch_details(id_list) #calls the detch_details method above, passes id_list as its argument
    f = open('pubs.txt', 'a+')
    for paper in papers:
    	f.write("PMID:"+ paper.get("PMID", "?")+"\n")
    	f.write("Title:"+ paper.get("TI", "?")+"\n")
    	f.write("Authors:"+ str(paper.get("AU", "?"))+"\n")
    	f.write("Affiliation:"+ paper.get("AD", "?")+"\n")
    	f.write("Abstract:"+ paper.get("AB", "?")+"\n")
    	f.write("Source:"+ paper.get("SO", "?")+"\n")
    	f.write("Date Published:"+ paper.get("DP", "?")+"\n")
    	f.write("Mesh Headings:"+ str(paper.get("MH", "?"))+"\n\n\r")





